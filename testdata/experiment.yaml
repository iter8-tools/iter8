spec:
  # task 1: generate HTTP requests for application URL
  # collect Iter8's built-in HTTP latency and error-related metrics
  - task: http
    with:
      duration: 2s
      errorRanges:
      - lower: 500
      url: https://httpbin.org/get
  # task 2: validate service level objectives for app using
  # the metrics collected in the above task
  - task: assess
    with:
      SLOs:
        upper:
          "http/error-rate": 0
          "http/latency-mean": 500
          "http/latency-p50": 1000
          "http/latency-p50.0": 100
          "http/latency-p95.0": 2500
          "http/latency-p99": 5000
  # tasks 3 & 4: print if SLOs are satisfied or not
  - if: SLOs()
    run: echo "SLOs satisfied"
  - if: not SLOs()
    run: echo "SLOs not satisfied"
