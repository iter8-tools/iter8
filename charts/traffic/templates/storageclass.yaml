{{- if .Values.storageClass }}
{{- if not .Values.storageClass.provisioner }}
{{- fail "no storage class provisioner defined" }}
{{- else if not .Values.storageClass.parameters }}
{{- fail "no storage class parameters defined" }}
{{- end }}
{{- else }}
{{- fail "no storage class parameters" }}
{{- end }}
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: {{ .Release.Name }}
  {{ template "iter8-traffic.labels" . }}
provisioner: {{ .Values.storageClass.provisioner }}
parameters:
  {{ toYaml .Values.storageClass.parameters | indent 2 | trim }}