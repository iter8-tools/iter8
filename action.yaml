name: 'Iter8 Install'
description: 'Install Iter8 CLI'
inputs:
  version:
    description: "Version of iter8 to install"
    required: false
    default: v0.10.5
runs:
  using: 'composite'
  steps:
    - name: Install Go
      uses: actions/setup-go@v2
      with:
        go-version: 1.17
    - name: Install latest version of Iter8 CLI
      run: | 
        OS=$(uname -s | tr '[:upper:]' '[:lower:]')
        ARCH=$(uname -m | sed 's/i386/386/' | sed 's/x86_64/amd64/')
        echo "github.action = ${{ github.action }}"
        echo "github.action_path = ${{ github.action_path }}"
        echo "github.action_ref = ${{ github.action_ref }}"
        echo "github.action_repository = ${{ github.action_repository }}"
        echo "github.action_status = ${{ github.action_status }}"
        wget https://github.com/iter8-tools/iter8/releases/download/${{inputs.version}}/iter8-$OS-$ARCH.tar.gz
        tar -xvf iter8-$OS-$ARCH.tar.gz
        mv $OS-$ARCH/iter8 /usr/local/bin
      shell: bash
branding:
  icon: check-circle
  color: green
