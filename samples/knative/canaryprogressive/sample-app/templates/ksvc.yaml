apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: sample-app # The name of the app
  namespace: default # The namespace the app will use
spec:
  template:
    metadata:
      name: {{ .Values.name }}
    spec:
      containers:
      # The URL to the sample app docker image
      - image: {{ .Values.image }}
        env:
        - name: T_VERSION
          value: {{ .Values.tVersion }}
  {{ if .Values.traffic }}
  traffic:
  {{- range .Values.traffic }}
  - {{ toYaml . | nindent 4 }}
  {{- end }}
  {{ end }}